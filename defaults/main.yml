---
### STORAGE CONFIGS

# currently cephfs and nfs storage backends supported
#storage_backend: "cephfs"
storage_backend: "nfs"

data_mount_root: "/data"
configs_directory: "configs"
media_directory: "media"
git_directory: "git"
www_directory: "public_html"


### MEDIA SERVER CONFIGS
# Plex Server
plex_server_ip:
plex_username:
plex_password:
plex_token:

media_root: '{{ data_mount_root }}'
usenet_incomplete_download_directory: '/downloads/usenet/incomplete'
usenet_complete_download_directory: '/downloads/usenet/complete'
usenet_watch_directory: '/downloads/usenet/watch'

plex_ramfs_transcode: False
ramfs_transcode_path: /transcode
ramfs_mode: 01777
ramfs_size_mb: 8192

apache_vhosts:
  - servername: "webservices.{{ www_domain }}"
    serveralias: webservices
    serverlisten: 80
    extra_parameters: |
      <Location /server-status>
        SetHandler server-status
        Require ip 127.0.0.1
        Require host {{ www_domain }}" localhost
      </Location>

  - servername: "plex.{{ www_domain }}"
    serverlisten: 80
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.1.100:32400/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.1.100:32400/

apache_vhosts_ssl:
  - servername: "plex.{{ www_domain }}"
    serverlisten: 443
    sslcertcontent: '{{ vault_majormisanthropy_ssl_certificate }}'
    sslkeycontent: '{{ vault_majormisanthropy_ssl_private_key }}'
    sslcertfile: "/etc/ssl/certs/majormisanthropy.com.pem"
    sslkeyfile: "/etc/ssl/private/majormisanthropy.com.key"
    extra_parameters: |
      SecRuleEngine Off
      ProxyPreserveHost on
      ProxyPass / http://192.168.1.100:32400/ connectiontimeout=60 timeout=60 retry=5 keepalive=On disablereuse=On
      ProxyPassReverse / http://192.168.1.100:32400/


plex_ramfs_transcode: False
ramfs_transcode_path: /transcode
ramfs_mode: 01777
ramfs_size_mb: 8192


### WEBSERVER CONFIGS
www_domain: 'home.example.com'
www_vhost: '{{ ansible_hostname }}.{{ www_domain }}'
www_aliases: '{{ www_domain }}'
www_admin_email: 'admin@{{ www_domain }}'
www_options: "-Indexes -FollowSymLinks"
www_allow_override: "None"
www_servertokens: "Prod"
www_serversignature: "Off"
www_traceenable: "Off"

www_dos_whitelist:
  - 'localhost'
  - '127.0.0.1'

www_dos_hash_table_size: 3097
www_dos_page_count: 2
www_dos_site_count: 50
www_dos_page_interval: 1
www_dos_site_interval: 1
www_dos_blocking_period: 60
www_dos_log_dir: "/var/log/apache2/mod_evasive.log"


### FILESERVER CONFIGS
afp_ldap_auth: False
